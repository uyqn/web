\documentclass[14pt, a4paper, english]{report}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc,url}
\usepackage{babel,textcomp}
\usepackage{amsmath, amssymb}
\usepackage{polynom}
\usepackage[parfill]{parskip}
\usepackage{titlesec}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{float}
\usepackage{pdfpages}
\usepackage{glossaries}
%----------
\usepackage{listings}
\lstset{
	basicstyle=\ttfamily,
	columns=fullflexible,
	breaklines=true,
	postbreak=\mbox{\textcolor{red}{$\hookrightarrow$}\space},
}
% Default fixed font does not support bold face
\DeclareFixedFont{\ttb}{T1}{txtt}{bx}{n}{12} % for bold
\DeclareFixedFont{\ttm}{T1}{txtt}{m}{n}{12}  % for normal

% Custom colors
\usepackage{color}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\definecolor{safetyorange}{rgb}{1.0, 0.4, 0.0}
\definecolor{blue-violet}{rgb}{0.54, 0.17, 0.89}
\definecolor{saffron}{rgb}{0.96, 0.77, 0.19}
\definecolor{goldenrod}{rgb}{0.85, 0.65, 0.13}
% Python style for highlighting
\newcommand\pythonstyle{\lstset{
		language=Python,
		tabsize=2,
		morekeywords={with, async, await, None, False},              % Add keywords here
		keywordstyle=\color{safetyorange},
		emph=[1]{self, __init__, __name__},          % Custom highlighting
		emphstyle=[1]{\color{blue-violet}},    % Custom highlighting style
		emph=[2]{main, listen},
		emphstyle=[2]{\color{goldenrod}},
		emph=[3]{open},
		emphstyle=[3]{\color{deepblue}},
		emph=[4]{optional, required, verify},
		emphstyle=[4]{\color{deepred}},
		stringstyle=\color{deepgreen},
		showstringspaces=false
}}


% Python environment
\lstnewenvironment{python}[1][]
{
	\pythonstyle
	\lstset{#1}
}
{}

% Python for external files
\newcommand\pythonexternal[2][]{{
		\pythonstyle
		\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\pythoninline[1]{{\pythonstyle\lstinline!#1!}}

% C#
\definecolor{red}{rgb}{0.6,0,0} 
\definecolor{blue}{rgb}{0,0,0.6}
\definecolor{green}{rgb}{0,0.8,0}
\definecolor{cyan}{rgb}{0.0,0.6,0.6}

\definecolor{bluekeywords}{rgb}{0,0,1}
\definecolor{greencomments}{rgb}{0,0.5,0}
\definecolor{redstrings}{rgb}{0.64,0.08,0.08}
\definecolor{xmlcomments}{rgb}{0.5,0.5,0.5}
\definecolor{amethyst}{rgb}{0.6, 0.4, 0.8}
\definecolor{blue-violet}{rgb}{0.54, 0.17, 0.89}
\definecolor{types}{rgb}{0.17,0.57,0.68}
\definecolor{caribbeangreen}{rgb}{0.0, 0.8, 0.6}
\definecolor{emerald}{rgb}{0.31, 0.78, 0.47}
\definecolor{fallow}{rgb}{0.76, 0.6, 0.42}
\definecolor{otterbrown}{rgb}{0.4, 0.26, 0.13}

\usepackage{caption}
\DeclareCaptionFont{white}{\color{white}}
\DeclareCaptionFormat{listing}{\colorbox{blue}{\parbox{\textwidth}{\hspace{15pt}#1#2#3}}}
\captionsetup[lstlisting]{format=listing,labelfont=white,textfont=white, singlelinecheck=false, margin=0pt, font={bf,footnotesize}}

\newcommand\csharpstyle{\lstset{
		language=csh,
		tabsize=2,
		extendedchars=true,
		breaklines=true,
		stringstyle=\color{blue}\ttfamily,
		showspaces=false,
		showtabs=false,
		commentstyle=\color{greencomments},
		morecomment=[l]{//}, %use comment-line-style!
		morecomment=[s]{/*}{*/}, %for multiline comments
		showstringspaces=false,
		morekeywords={ abstract, event, new, struct,
			as, explicit, null, switch,
			base, extern, object, this,
			bool, false, operator, throw,
			break, finally, out, true,
			byte, fixed, override, try,
			case, float, params, typeof,
			catch, for, private, uint,
			char, foreach, protected, ulong,
			checked, goto, public, unchecked,
			class, if, readonly, unsafe,
			const, implicit, ref, ushort,
			continue, in, return, using,
			decimal, int, sbyte, virtual,
			default, interface, sealed, volatile,
			delegate, internal, short, void,
			do, is, sizeof, while,
			double, lock, stackalloc,
			else, long, static,
			enum, namespace, string, await, async, var, partial
		},
		keywordstyle=\color{bluekeywords},
		stringstyle=\color{otterbrown},
		emph=[1]{Task, JsonDocument, Vehicle, DataException, IDevice, VehiclesHubDatabase, VehiclesHub, Hub, Intersection, HashSet, Dictionary, IVehiclesHubDatabase, Road, IEnumerable, LinkedList, IRoadComponent, RoutePlanner, Lane, Math, IntersectionNode, RoadNode, LaneNode},
		emphstyle=[1]{\color{blue-violet}},
		emph=[2]{
			AddClient, Create, GetProperty, ExtractLane, CurrentLane, SetTravelPlan, StartNode, EndNode, Add, Update, Route, Details, Client, WaitForVehicles, Fetch, SendEventToAll, SendAsync, Start, MapHub, Patch, HandleIntersection, HandleEndOfRoute, HandleInsideIntersection, AddRoad, AddLane, ConnectedLanes, ForEach, AddSingleton, Remove, NextVehiclesIn, OnlyFirstIntoNextVehiclesIn, Node, CurrentRoad, OrderByDescending, OrderBy, Abs, AddComponent, ContainsKey, InIntersection, OnRoad, ToNextIntersection, CurrentNode, NextNode, NextIntersection
		},
		emphstyle=[2]{\color{deepgreen}},
		emph=[3]{RootElement, Id, Context, ConnectionId, Velocity, Clients, SpeedLimit, All, Clock, _intersection, _vehicles, _lanes, Count, _connectionIds, _vehiclesConnectionId, Length, Services, _visitedNodes, _travelPlan, Intersections, Key, Reversed, ConnectedRoads, Value, Position, _route, DistanceWithCurrentNode},
		emphstyle=[3]{\color{cyan}}
}}

\lstnewenvironment{csharp}[1][]
{
	\csharpstyle
	\lstset{#1}
}
{}

\newcommand\csharpexternal[2][]{{
		\csharpstyle
		\lstinputlisting[#1]{#2}}}

\newcommand\csharpinline[1]{{\csharpstyle\lstinline!#1!}}

% JSON
\usepackage{xcolor}
\colorlet{punct}{red!60!black}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}
\definecolor{palatinatepurple}{rgb}{0.41, 0.16, 0.38}

\lstdefinelanguage{json}{
	basicstyle=\normalfont\ttfamily,
	numbersep=8pt,
	showstringspaces=false,
	breaklines=true,
	literate=
	*{0}{{{\color{numb}0}}}{1}
	{1}{{{\color{numb}1}}}{1}
	{2}{{{\color{numb}2}}}{1}
	{3}{{{\color{numb}3}}}{1}
	{4}{{{\color{numb}4}}}{1}
	{5}{{{\color{numb}5}}}{1}
	{6}{{{\color{numb}6}}}{1}
	{7}{{{\color{numb}7}}}{1}
	{8}{{{\color{numb}8}}}{1}
	{9}{{{\color{numb}9}}}{1}
	{:}{{{\color{punct}{:}}}}{1}
	{,}{{{\color{punct}{,}}}}{1}
	{\{}{{{\color{delim}{\{}}}}{1}
	{\}}{{{\color{delim}{\}}}}}{1}
	{[}{{{\color{delim}{[}}}}{1}
	{]}{{{\color{delim}{]}}}}{1},
}

\newcommand\jsonstyle{\lstset{
		language=json,
		tabsize=2,
		morekeywords={self, with, async, await, true, false},              % Add keywords here
		keywordstyle=\color{deepblue},
		emph={Vehicle, Client, __init__},          % Custom highlighting
		emphstyle=\color{deepred},    % Custom highlighting style
		stringstyle=\color{deepgreen},
		showstringspaces=false
}}


% Python environment
\lstnewenvironment{json}[1][]
{
	\jsonstyle
	\lstset{#1}
}
{}

% Python for external files
\newcommand\jsonexternal[2][]{{
		\jsonstyle
		\lstinputlisting[#1]{#2}}}

% Python for inline
\newcommand\jsoninline[1]{{\jsonstyle\lstinline!#1!}}

%----------
\usepackage{hyperref}
\usepackage{xcolor}
\hypersetup{
	colorlinks   = true, %Colours links instead of ugly boxes
	urlcolor     = blue, %Colour for external hyperlinks
	linkcolor    = blue, %Colour of internal links
	citecolor   = black %Colour of citations
}

% ------------------------------------------------------------
%Bibliografi
\usepackage[style=apa, backend=biber]{biblatex}
\usepackage{csquotes}
\DeclareLanguageMapping{english}{english-apa}
\addbibresource{bibliography.bib}
% ------------------------------------------------------------
\newacronym{IoT}{IoT}{Internet of things}
\makeglossaries
% ------------------------------------------------------------
% Side formatering
\lhead{DATA3900}
\chead{Final report}
\rhead{Group 23}
\usepackage{lastpage}
\cfoot{Page \thepage}
% ------------------------------------------------------------
\newcommand{\figref}[1]{\hyperref[#1]{Figure \ref{#1}}}
\newcommand{\secref}[1]{\hyperref[#1]{\ref{#1} \nameref{#1}}}
\newcommand{\equationref}[1]{\hyperref[#1]{equation \eqref{#1}}}
% ------------------------------------------------------------
\usepackage{titlesec}

\titleclass{\part}{top} % make part like a chapter
\titleformat{\part}
[display]
{\centering\normalfont\Huge\bfseries}
{\vspace{3pt}\vspace{3pt}\MakeUppercase{\partname} \thepart}
{0pt}
{\vspace{1pc}\huge\MakeUppercase}
%
\titlespacing*{\part}{0pt}{0pt}{20pt}
%
%% ------------------------------------------ %% 
% ------------------------------------------------------------
\title
{
	DATA3900 - Bachelor project \\
	Final report
}
\author{Gruppe 23:\\
    Hansen, Andreas Torres (s338851)\\
	Nguyen, Uy Quoc (s341864)\\
	Ottersland, Anders Hagen (s341883)\\
	\\Total pages: \pageref{LastPage}}
\date{Last updated:\\ \today}

\begin{document}
	\includepdf{Tittelside}
	\maketitle
	\pagenumbering{gobble}
	\tableofcontents
	% \listoffigures <- utkommenter dersom vi har figurer
	% \listoftables <- utkommenter dersom vi har tabeller
	\clearpage
	\pagestyle{fancy}
	\pagenumbering{arabic}
	% ------------------------------------------------------------
	% Dokumentasjonen går inn her, alt annet generes automatisk. 
	% Husk bare på å inkludere referanser i form av \cite{referanse-navn}
	% uten parantes, eller (\cite{referanse-navn}) <- med parantes
	% ------------------------------------------------------------
	\addcontentsline{toc}{part}{Abstract}
	\part*{Abstract}
	In 2020 a group of students from Høyskolen Kristiania developed self-driving cars with Raspberry Pi for Accenture. This year, our group was tasked to extend their project by combining it with a centralized communication system. We consider how traffic flow can be improved with autonomous cars and a server managing the traffic. Consequently, our group developed a client-server program where the existing Raspberry Pi vehicles communicate with a server to improve traffic flow at an intersection.
	
	Traffic lights control intersections today to prevent accidents. However, stopping and accelerating vehicles lead to traffic congestion \parencite{traffic_shockwave}. Hence, this project concludes, through demonstrations, shows that a centralized server can indeed improve traffic flow by adjusting the vehicles' speed accordingly.
	\clearpage
	
	\addcontentsline{toc}{part}{Preface}
	\part*{Preface}
	This is the report of our bachelor thesis at Oslo Metropolitan University, Faculty of Technology, Art and Design. We tried to develop a solution for traffic management with self-driving cars and server communication. Our project was created for Accenture and lasted from January 2022 to May 2022. In this project, we documented the functionality and process of making it. We physically demonstrated our proposed solution with a Raspberry Pi computer working as a car. 
	
	This report is split into three parts: First, an introductory part where the project is introduced. Then a process documentation, where we elaborate on the process of the development. Lastly, the product documentation elaborates on the structure of the program.
	
	We would like to thank everyone that has contributed to our project. We would especially like to thank:
	\begin{itemize}
		\item Ivar Austin Fauske, Solfrid Johansen and Benjamin Vallestad, representatives from Accenture.
		\item Dr. Jianhua Zhang, internal supervisor at OsloMet.
	\end{itemize}
	\part{Preliminary}
	This part serves as an introduction to the project. Throughout this part of the report, we will introduce this project's contributing members and clients. Additionally, we will elaborate on the goals and requirements surrounding our project and introduce the research and development question this project explores.
	
	\include{chapters/introductions}
	%\include{chapters/research_areas}
	\part{Process Documentation}
	The process documentation involves the process of the project, and elaborates on the challenges and solutions that the group has explored. Moreover, it details how the group has worked and what the group did to make this project a success.
	
	\include{chapters/process_documentation}
	\include{chapters/implementation}
	\include{chapters/conclusion}
	% \include{chapters/discussion}
	\part{Product Document}
	The product documentation is a technical description of the product and provides a detailed explanation of the system's structure. The reader of this documentation is assumed to have a technical background. The resulting product is a semi-physical simulation, and thus, no user interface has been developed. We recommend readers to read appendix \secref{sec:user_manual} to study how our semi-physical simulation was set up. In addition, UML diagrams have been attached in \secref{sec:uml} for those that want to study the architecture of our system further.
	\include{chapters/product_documentation}
%	\include{chapters/conclusion}

	
	% -----------------------------------------------------------
	\clearpage
    \addcontentsline{toc}{chapter}{Bibliography}
    \printbibliography
    \appendix
    \include{appendices/user_manual}
    \include{appendices/uml}
    \include{appendices/acronyms}
    \include{appendices/sprint_retroperspective}
    
\end{document}
